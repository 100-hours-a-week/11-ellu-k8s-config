# 로키 Single Binary 모드 (최소 설정)
deploymentMode: SingleBinary

# Single Binary 설정
singleBinary:
  replicas: 1
  nodeSelector:
    cloud-provider: aws
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi
  persistence:
    enabled: true
    storageClassName: "ebs-sc"
    size: 10Gi

# 모든 다른 컴포넌트 비활성화
backend:
  replicas: 0
read:
  replicas: 0
write:
  replicas: 0
ingester:
  replicas: 0
querier:
  replicas: 0
queryFrontend:
  replicas: 0
queryScheduler:
  replicas: 0
distributor:
  replicas: 0
compactor:
  replicas: 0
indexGateway:
  replicas: 0
bloomCompactor:
  replicas: 0
bloomGateway:
  replicas: 0

# 캐시 비활성화
chunksCache:
  enabled: false
resultsCache:
  enabled: false

# 게이트웨이 비활성화
gateway:
  enabled: false

# 테스트 스키마 사용 (문제 없는 설정)
loki:
  auth_enabled: false
  useTestSchema: true

# 기본 서비스
service:
  type: ClusterIP
  port: 3100

# 서비스 모니터
serviceMonitor:
  enabled: true

# 테스트 비활성화
test:
  enabled: false